(function(b){b.fn.inputIndicator=function(r){var e,f;function l(a,b){c.font=b.size+"px "+b.family;if(c.fillText)return c.measureText(a).width;if(c.mozDrawText)return c.mozMeasureText(a)}var s=b.extend({},{bgPos:"30px"},r),c=document.createElement("canvas").getContext("2d"),g=this.selector,h,m,n,i,j,k,p,q,d;f=e=null;b(document).bind("DOMNodeInserted",function(a){b(a.target).find(g).trigger("keydown")});b(document).on("mousedown mouseup keydown",g,function(a){"mousedown"==a.type?f=a.clientX:"mouseup"== a.type&&(e=a.clientX<f?"left":"right")}).on("keydown focus select mouseup",g,function(){var a=e;if(document.selection)this.focus(),a=document.selection.createRange(),a.moveStart("character",-this.value.length),h=a.text.length;else if(this.selectionStart||"0"==this.selectionStart)h="left"==a?this.selectionStart:this.selectionEnd;m=h||0;n=b(this).width();i=window.getComputedStyle(this);j={size:parseInt(i.getPropertyValue("font-size")),family:i.getPropertyValue("font-family")};k=l(this.value,j);p=l(this.value.substring(0, m),j);q=Math.floor(100*(p/k));d=n/k;1<d&&(d=0);b(this).css("background-size",100*d+"%").css("background-position",q+"% "+s.bgPos)});this.each(function(){b(this).trigger("focus")})}})(jQuery);
